{% extends 'base.html' %}
{% block title %}Senior QA Training Pricing{% endblock %}
{% block content %}
<img src="/static/img/tsqa-pricing.png" class="img-fluid rounded mx-auto d-block" style="width: 40%">
<!-- <p class="text-center top-space-30"><u>To sign up, please send an email to Arun (mak@qxf2.com).</u></p> -->
<div class="col-md-12 vcenter top-space-20">
    <p class="text-center">
        <button type="button" class="btn btn-warning btn-lg" data-toggle="modal" data-target="#contactModal">Contact
            us</button>
    </p>
</div>


<!--Contact us modal form-->
<!--src: https://www.w3schools.com/bootstrap/bootstrap_modal.asp-->
<div id="contactModal" class="modal fade" role="dialog">
    <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">

                <h2 class="margin-base-vertical text-center">Contact Us</h2>

                <button type="button" class="close" data-dismiss="modal">&times;</button>

            </div>
            <div class="modal-body" id="contact_form">
                <div id="contact_results"></div>
                <div class="row form-style vcenter" id="contact_body">
                    <div class="row col-md-12">
                        <label class="top-space"><span>Name <span class="required">*</span></span>
                            <input type="text" name="name" id="name" required="true" class="input-field"
                                placeholder="So we can greet you.">
                        </label>
                    </div>
                    <div class="row col-md-12">
                        <label><span>Email <span class="required">*</span></span>
                            <input type="email" id="email" name="email" required="true" class="input-field email"
                                placeholder="No spam. Ever.">
                        </label>
                        <span class="required" id="email-error">&nbsp;&nbsp; Email a valid email address to hear back
                            from use
                        </span>
                    </div>
                    <div class="row col-md-12">
                        <label for="field5"><span>Message <span class="required">*</span></span>
                            <textarea name="message" id="message" class="textarea-field" required="true"
                                placeholder="Tell us about your project/engagement. Qxf2 is standing by to help you!"></textarea>
                        </label>
                    </div>
                    <div class="row col-md-12">
                        <label>
                            <p class="text-center top-space-25"><a class="btn btn-warning btn-large" id="submit_btn"
                                    value="Submit">Send</a></p>
                        </label>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="https://code.jquery.com/jquery-3.5.1.min.js"
    integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
<script type="text/javascript">
    $("document").ready(function () {
        $("#submit_btn").addClass('disabled');
        $("#email-error").hide();

        $(".email").change(function () {
            var inputvalues = $(this).val();
            var regex = /^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;
            if (!regex.test(inputvalues)) {
                $("#email-error").show();
                return regex.test(inputvalues);
            } else {
                $("#email-error").hide();
                $("#submit_btn").removeClass("disabled");
            }
        });

        $("#submit_btn").click(function () {
            var proceed = true;
            emailjs.init('user_8k6FfpYGOYlfflIsrTFyF');
            //simple validation at client's end
            //loop through each field and we simply change border color to red for invalid fields       
            $("#contact_form input[required=true], #contact_form textarea[required=true]").each(function () {
                $(this).css('border-color', '');
                if (!$.trim($(this).val())) { //if this field is empty 
                    $(this).css('border-color', 'red'); //change border color to red   
                    proceed = false; //set do not proceed flag
                }
                //check invalid email
                var email_reg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
                if ($(this).attr("type") == "email" && !email_reg.test($.trim($(this).val()))) {
                    $(this).css('border-color', 'red'); //change border color to red   
                    proceed = false; //set do not proceed flag              
                }
            });

            if (proceed) //everything looks good! proceed...
            {
                //get input field values data to be sent to server
                var template_params = {
                    'user_name': document.getElementById("name").value,
                    'reply_to': document.getElementById("email").value,
                    'message': document.getElementById("message").value
                };
                var service_id = "default_service";
                var template_id = "contact_us";
                emailjs.send(service_id, template_id, template_params)
                    .then(function (response) {
                        console.log('SUCCESS!', response.status, response.text);
                        output = '<div class="success">' + 'Thank You for your email &nbsp;' + document.getElementById("name").value + '! We will get back to you within 5 business days.</div>';
                        //reset values in all input fields
                        $("#contact_form  input[required=true], #contact_form textarea[required=true]").val('');
                        $("#contact_form #contact_body").slideUp(); //hide form after success
                        $("#contact_form #contact_results").hide().html(output).slideDown();

                    }, function (error) {
                        console.log('FAILED...', error);
                        output = '<div class="error">' + response.text + '</div>';
                    });
            }
        });

        //reset previously set border colors and hide all message on .keyup()
        $("#contact_form  input[required=true], #contact_form textarea[required=true]").keyup(function () {
            $(this).css('border-color', '');
            $("#result").slideUp();
        });

    });
</script>

{% endblock %}